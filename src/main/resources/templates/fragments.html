<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Fragments</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
<header th:text="${title}"></header>
<nav th:fragment="home-page">
    <a href="/">Strona główna</a>
</nav>
<div th:fragment="transaction-form">
    <input type="hidden" th:field="*{id}"/>
    <div>
        <label for="transactionType">Typ transakcji</label>
        <select required id="transactionType" th:field="*{type}" class="form-select"
                aria-label="Default select example">
            <option hidden value="">Wybierz typ transakcji</option>
            <option th:each="type : ${transactionTypes}" th:value="${type}" th:text="${type}"></option>
        </select>
    </div>
    <label for="description">Opis transakcji</label>
    <div class="form-floating">
        <textarea required th:field="*{description}" class="form-control" id="description"></textarea>
    </div>
    <label for="amount">Kwota w PLN</label>
    <div class="form-floating">
        <input required th:field="*{amount}" type="number" id="amount" min="0.1" step="0.1">
    </div>
    <label for="date">Data</label> <br>
    <input required class="form-floating" th:field="*{date}" type="date" id="date"/> <br>
</div>
<div th:fragment="print-transactions">
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">typ</th>
            <th scope="col">opis</th>
            <th scope="col">kwota</th>
            <th scope="col">data</th>
            <th scope="col">edycja</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="transaction: ${transactions}">
            <td th:text="${transaction.id}"></td>
            <td th:text="${transaction.type}"></td>
            <td th:text="${transaction.description}"></td>
            <td th:text="${transaction.amount}"></td>
            <td th:text="${transaction.date}"></td>
            <td th:switch="${mode}">
                <span th:case='edit'>
                <a th:href="|/edit?id=${transaction.id}|">Edytuj</a>
                    </span>
                <span th:case='delete'>
               <a th:href="|/delete?id=${transaction.id}|">Kasuj</a>
                    </span>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>